# Платформа для автообработки фото в реальном времени

Курсовой проект по дисциплине «Настройка и администрирование сервисного ПО»

## Структура проекта

```
project/
├── app/                     # Python приложение
│   ├── main.py              # FastAPI эндпоинты
│   ├── services.py          # Логика обработки изображений
│   ├── Dockerfile           # Контейнеризация Python-сервиса
│   └── requirements.txt     # Зависимости Python
├── nginx/                   # Настройки Nginx
│   └── nginx.conf           # Конфигурация Reverse Proxy
├── docker-compose.yml       # Оркестрация контейнеров
└── README.md                # Документация
```

## Стек технологий

- **Backend:** Python 3.9+ с FastAPI
- **Обработка изображений:** Pillow (PIL)
- **Web-сервер:** Nginx (Reverse Proxy)
- **Контейнеризация:** Docker + Docker Compose

## Запуск проекта

### 1. Клонирование или переход в директорию проекта

```bash
cd path/to/project
```

### 2. Сборка и запуск контейнеров

```bash
docker-compose up --build
```

Эта команда:
- Соберёт Docker-образ для Python-приложения
- Скачает образ Nginx
- Запустит оба контейнера в связанной сети

### 3. Проверка работоспособности

```bash
# Health check
curl http://localhost/health

# Ожидаемый ответ:
# {"status":"healthy","service":"watermark-processor"}
```

### 4. Тестирование обработки изображения

```bash
# Отправка изображения на обработку
curl -X POST -F "file=@/path/to/image.jpg" http://localhost/process --output result.jpg
```

## API Эндпоинты

| Метод | Путь      | Описание                           |
|-------|-----------|-------------------------------------|
| GET   | /health   | Проверка работоспособности сервиса |
| POST  | /process  | Добавление водяного знака          |

## Документация API

После запуска проекта доступна автоматическая документация:

- **Swagger UI:** http://localhost/docs
- **ReDoc:** http://localhost/redoc

## Остановка проекта

```bash
# Остановить контейнеры
docker-compose down

# Остановить и удалить volumes
docker-compose down -v
```

## Архитектура решения

```
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│   Клиент    │─────▶│    Nginx    │─────▶│   FastAPI   │
│  (Browser)  │◀─────│   :80       │◀─────│   :8000     │
└─────────────┘      └─────────────┘      └─────────────┘
                        Reverse            Python App
                        Proxy              + Pillow
```

- **Nginx** — принимает входящие запросы на порту 80, проксирует их на FastAPI
- **FastAPI** — обрабатывает запросы, добавляет водяной знак на изображения
- **Docker Compose** — управляет жизненным циклом контейнеров

## Ограничения

- Максимальный размер загружаемого файла: **10 МБ** (настраивается в `nginx.conf`)
- Поддерживаемые форматы: JPEG, PNG, GIF, BMP
- Выходной формат: JPEG

## Автор

Студент курса «Настройка и администрирование сервисного ПО»
